name: flask_server
description: Run Flask application server
icon: server

# Run the Flask application 
command: gunicorn main:app -k gevent -w 4 --timeout 300 --bind 0.0.0.0:3000 --reload

# Environment variables for Flask
environment:
  FLASK_ENV: development
  FLASK_DEBUG: 1
  PORT: 3000

# Port setup
ports:
  - port: 3000
    visibility: public
    name: Web App
    onOpen: open-preview

# Wait for startup
onStartup:
  - name: Checking server
    command: until curl -s http://localhost:3000 > /dev/null || [ $SECONDS -gt 30 ]; do echo "Waiting for server..."; sleep 1; done