{% extends "base.html" %}

{% block title %}Your Referral Link{% endblock %}

{% block styles %}
<style>
    .referral-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 30px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .referral-box {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 25px;
        margin-bottom: 30px;
        text-align: center;
    }
    
    .referral-link-input {
        width: 100%;
        padding: 15px;
        font-size: 16px;
        border: 2px solid #ced4da;
        border-radius: 4px;
        text-align: center;
        margin-bottom: 15px;
    }
    
    .copy-btn {
        margin-top: 10px;
        padding: 10px 30px;
        font-size: 16px;
    }
    
    .share-options {
        display: flex;
        justify-content: center;
        margin-top: 20px;
    }
    
    .share-btn {
        margin: 0 10px;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 24px;
        text-decoration: none;
        transition: transform 0.2s;
    }
    
    .share-btn:hover {
        transform: scale(1.1);
        color: white;
    }
    
    .share-email {
        background-color: #3b5998;
    }
    
    .share-twitter {
        background-color: #1da1f2;
    }
    
    .share-linkedin {
        background-color: #0077b5;
    }
    
    .share-whatsapp {
        background-color: #25d366;
    }
    
    .promotional-materials {
        margin-top: 40px;
    }
    
    .promo-card {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
    }
    
    .promo-card h5 {
        margin-top: 0;
        margin-bottom: 15px;
        color: #4e73df;
    }
    
    .promo-card pre {
        background-color: #f0f0f0;
        padding: 15px;
        border-radius: 4px;
        white-space: pre-wrap;
        word-break: break-all;
    }
    
    .copy-promo-btn {
        margin-top: 10px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="referral-container">
        <h1 class="mb-4 text-center">Your Referral Link</h1>
        
        <div class="referral-box">
            <h4>Share this link to earn commissions</h4>
            <p>When people sign up and make purchases through your link, you'll earn 10% commission!</p>
            
            <input type="text" id="referralLink" class="referral-link-input" readonly value="{{ referral_url }}">
            <button class="btn btn-primary btn-lg copy-btn" onclick="copyReferralLink()">Copy Link</button>
            
            <div class="share-options">
                <a href="mailto:?subject=Check%20out%20this%20amazing%20service&body=I've%20been%20using%20this%20great%20service%20and%20thought%20you%20might%20like%20it%20too.%20Sign%20up%20through%20my%20link:%20{{ referral_url|urlencode }}" class="share-btn share-email" title="Share via Email">
                    <i class="fas fa-envelope"></i>
                </a>
                <a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20amazing%20service!%20{{ referral_url|urlencode }}" target="_blank" class="share-btn share-twitter" title="Share on Twitter">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ referral_url|urlencode }}" target="_blank" class="share-btn share-linkedin" title="Share on LinkedIn">
                    <i class="fab fa-linkedin-in"></i>
                </a>
                <a href="https://wa.me/?text=Check%20out%20this%20amazing%20service!%20{{ referral_url|urlencode }}" target="_blank" class="share-btn share-whatsapp" title="Share on WhatsApp">
                    <i class="fab fa-whatsapp"></i>
                </a>
            </div>
        </div>
        
        <div class="promotional-materials">
            <h3 class="mb-4">Promotional Materials</h3>
            <p>Use these pre-written messages to share your referral link:</p>
            
            <div class="promo-card">
                <h5>Email Template</h5>
                <pre id="emailTemplate">Hi there,

I've been using this amazing AI-powered platform that has really helped me with my work. They offer a variety of features including advanced AI models and excellent customer support.

You can get started with a free trial, and if you sign up through my referral link, you'll get some bonus credits:

{{ referral_url }}

Let me know if you have any questions about it!

Best,
{{ affiliate.name }}</pre>
                <button class="btn btn-sm btn-outline-primary copy-promo-btn" onclick="copyText('emailTemplate')">Copy Email Template</button>
            </div>
            
            <div class="promo-card">
                <h5>Social Media Post</h5>
                <pre id="socialTemplate">ðŸš€ I've been using this incredible AI platform and it's been a game-changer for my productivity!

Try it out through my referral link and get started with some bonus credits:
{{ referral_url }}

#AI #Productivity #TechTools</pre>
                <button class="btn btn-sm btn-outline-primary copy-promo-btn" onclick="copyText('socialTemplate')">Copy Social Post</button>
            </div>
            
            <div class="promo-card">
                <h5>Blog/Website HTML</h5>
                <pre id="htmlTemplate">&lt;a href="{{ referral_url }}" class="btn btn-primary"&gt;Try this amazing AI platform!&lt;/a&gt;</pre>
                <button class="btn btn-sm btn-outline-primary copy-promo-btn" onclick="copyText('htmlTemplate')">Copy HTML</button>
            </div>
        </div>
        
        <div class="text-center mt-4">
            <a href="{{ url_for('affiliate.dashboard') }}" class="btn btn-outline-secondary">Back to Dashboard</a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function copyReferralLink() {
        var copyText = document.getElementById("referralLink");
        copyText.select();
        copyText.setSelectionRange(0, 99999); // For mobile devices
        document.execCommand("copy");
        
        // Show a little tooltip or change button text
        var btn = document.querySelector('.copy-btn');
        var originalText = btn.textContent;
        btn.textContent = "Copied!";
        setTimeout(function() {
            btn.textContent = originalText;
        }, 2000);
    }
    
    function copyText(elementId) {
        var copyText = document.getElementById(elementId);
        var textArea = document.createElement("textarea");
        textArea.value = copyText.textContent;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand("copy");
        document.body.removeChild(textArea);
        
        // Show a little tooltip or change button text
        var btn = document.querySelector(`#${elementId}`).nextElementSibling;
        var originalText = btn.textContent;
        btn.textContent = "Copied!";
        setTimeout(function() {
            btn.textContent = originalText;
        }, 2000);
    }
</script>
{% endblock %}